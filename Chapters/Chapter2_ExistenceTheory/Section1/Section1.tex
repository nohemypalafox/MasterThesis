\section{Background}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    In this section, we present and prove some preliminary results. This results are 
    related to the proof of the existence of an optimal control. 

    Let us introduce some spaces. For any $0\leq t< T<\infty$ and $1\leq p <\infty$, define
    \begin{align*}
        &C([t,T];\mathbb{R}^n) = %
            \{\varphi:[t,T]\to \mathbb{R}^n \, : \, \varphi(\cdot)\, %
            \mbox{ is continuous }\}, \\
        &L^{\infty}(t,T;\mathbb{R}^n) = %
            \left\{\varphi:[t,T]\to \mathbb{R}^n \, : \, \varphi(\cdot)\, %
            \mbox{ is measurable },\, \displaystyle \esssup_{s\in[t,T]} %
            \abs{\varphi(s)} < \infty \right\}, \\
        &L^{p}(t,T;\mathbb{R}^n) = %
            \left\{\varphi:[t,T]\to \mathbb{R}^n \, : \, \varphi(\cdot)\, %
            \mbox{ is measurable },\, \int_{t}^{T}\abs{\varphi(s)}^p ds<\infty \right\},
    \end{align*}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    which are Banach spaces under the following norms, respectively, 
    \begin{align*}
        &\norm{\varphi(\cdot)}_{C([t,T];\mathbb{R}^n)} = %
            \sup_{s\in[t,T]} \abs{\varphi(s)},\, \mbox{ for every }\, \varphi(\cdot) %
            \in C([t,T];\mathbb{R}^n), \\
        &\norm{\varphi(\cdot)}_{L^{\infty}(t,T;\mathbb{R}^n)} = %
            \esssup_{s\in[t,T]} \abs{\varphi(s)}, \, \mbox{ for every }\, %
            \varphi(\cdot) \in L^{\infty}(t,T;\mathbb{R}^n), \\
        &\norm{\varphi(\cdot)}_{L^{p}(t,T;\mathbb{R}^n)} = %
            \left( \int_{t}^{T}\abs{\varphi(s)}^p ds \right)^\frac{1}{p}, \, %
            \mbox{ for every }\, %
            \varphi(\cdot) \in L^{p}(t,T;\mathbb{R}^n),
    \end{align*}
    where $\esssup f:=\inf\{M \, : \, \mu(\{x: f(x)>M\})=0\}$. We now present some 
    standard results.
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{theorem}[{\cite[Thm. 1.4.2, p. 24]{YongDG_ACIntro}}, Arzela-Ascoli]\label{AAT}
    	Let $\mathcal{Z}\subseteq C([t,T];\mathbb{R}^n)$ be an infinite set which is 
    	uniformly bounded 
    	$$
    	    \sup_{\varphi(\cdot)\in \mathcal{Z}} \norm{\varphi(\cdot)}_{C([t,T]; %
    	    \mathbb{R}^n)}<\infty,
    	$$
    	and equi-continuous, i.e., for any $\veps > 0$, there exists a $\delta > 0$ 
    	such that
    	$$
    	    \abs{\varphi(t)-\varphi(s)} < \veps, \, \, \forall \, \abs{t-s} < \delta, %
    	    \, \, \forall \varphi(\cdot)\in \mathcal{Z}
    	$$
    	Then there exists a sequence $\varphi_k(\cdot)\in \mathcal{Z}$ such that 
    	$$
    	    \lim_{k \to \infty} \norm{\varphi_k(\cdot) - \bar{\varphi}(\cdot)} %
    	    _{C([t,T];\mathbb{R}^n)}=0,
    	$$
        for some $\bar{\varphi}(\cdot) \in C([t,T];\mathbb{R}^n)$.	
        
    \end{theorem}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{proof}
        Let define $D:=\{t_k\}_{k\geq 1}$ be a dense set of $[t,T]$. For any $k\geq 1$,
        the set $ \{\varphi(t_1)|\varphi(\cdot)\in \mathcal{Z}\} $ is bounded. Thus, 
        there exists a sequence denoted by $\{\varphi_{\sigma_1(i)}(t_1)\}$ converging
        some point in $\mathbb{R}^n$, denoted by $\bar{\varphi}(t_1)$. Next, the set
        $\{\varphi_{\sigma_1(i)}(t_2)\}$ is bounded. Thus, we may let  
        $\{\varphi_{\sigma_2(i)}(t_2)\}$ be a subsequence of
        $\{\varphi_{\sigma_1(i)}(t_2)\}$, which is convergent to some point in 
        $\mathbb{R}^n$ denoted by $\bar{\varphi}(t_2)$. Continue this process, we obtain a
        function $\bar{\varphi}:D\to \mathbb{R}$. \\
        By letting 
        $$
            \bar{\varphi}(\cdot)=\varphi_{\sigma_i(i)}(\cdot),\, i\geq 1,
        $$
        we have 
        $$
            \lim_{i\to \infty} \bar{\varphi}_i(s)=\bar{\varphi}(s)\,\mbox{ for every }\, %
            s\in D.
        $$
        The equi-continuity of the sequence $\{\varphi_k(\cdot)\}$, implies that for any 
        $\veps>0$ there exits a $\delta=\delta(\veps)>0$, independent of $i\geq 1$ such that
        \begin{equation}\label{eq1.16}
        	\abs{\bar{\varphi}_i(s_1) - \bar{\varphi}_i(s_2)} < \veps\, \mbox{ for every } %
        	\, s_1, s_2 \in D, \abs{s_1-s_2} < \delta.
        \end{equation}
        Then, letting $ i \to \infty$, we obtain
        $$
            \abs{\bar{\varphi}(s_1)-\bar{\varphi}(s_2)} \leq \veps \, \, \mbox{ for every }%
            \, s_1,s_2\in D, \abs{s_1-s_2} < \delta.
        $$
        This means that $\bar{\varphi}:D\to \mathbb{R}^n$ is uniformly continuous on $D$.
        Consequently, we may extend $\bar{\varphi}(\cdot)$ to $\bar{D} = [t,T]$, which is
        still continuous. Finally, for any $\veps > 0$, let $\delta > 0$ be such that 
        \cref{eq1.16} holds, and by compactness of $[t,T]$, let 
        $S_{\delta} = \{s_j,1 \leq j\leq M\}\subseteq D$ with $M > 1$ depending on 
        $\veps > 0$ such that
        $$
            [t,T]\subseteq \bigcup^M_{j = 1}(s_j - \delta, s_j + \delta).
        $$
        Next, we may let $i_0 > 1$ such that
        $$
        	\abs{\bar{\varphi}_i(s_j) - \bar{\varphi}(s_j)}<\veps, \, \, i\geq i_0, \, \, %
        	1\leq j\leq M.
        $$
        Then for any $s\in [t,T]$, there is an $s_j\in S_{\delta}$ such that 
        $\abs{s - s_j} <\delta$. Consequently
        \begin{align*}
            \abs{\bar{\varphi}_i(s)-\bar{\varphi}(s)} &\leq %
                \abs{\bar{\varphi}_i(s)-\bar{\varphi}_i(s_j)} + %
                \abs{\bar{\varphi}_i(s_j)-\bar{\varphi}(s_j)|} + %
                \abs{\bar{\varphi}(s_j)-\bar{\varphi}(s)} \\
                &\leq 3\veps.
        \end{align*}
        This show that $\varphi_i(\cdot)$ converges to $\bar{\varphi}(\cdot)$ uniformly 
        in $s\in [t,T]$.
    \end{proof}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{theorem}[{\cite[Thm.1.4.3. p. 25 ]{YongDG_ACIntro}}, Banach-Saks]\label{BST}
        Let $\varphi_k(\cdot) \in L^2(a,b ; \mathbb{R}^n)$ be a sequence which is weakly
        convergent to $\bar{\varphi}(\cdot) \in L^2(a,b; \mathbb{R}^n)$, i.e.,
        $$
            \lim_{k\to \infty} \int_{a}^{b} \langle\varphi_{k}(s)-\bar{\varphi}(s),\eta(s)\rangle ds, 
        $$
        for every $\eta\in L^2(a,b;\mathbb{R}^n)$. Then there is a subsequence
        $\{\varphi_{k_j}(\cdot)\}$ such that
        $$
            \lim_{k\to \infty}\norm{\frac{1}{N}\sum_{j=1}^{N}\varphi_{k_j}(\cdot) - %
            \bar{\varphi}(\cdot)}_{L^2(a,b;\mathbb{R}^n)} = 0.
        $$
    \end{theorem}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{proof}    
        Without loss of generality, first we consider that $\bar{\varphi}(\cdot)=0$. 
        Let $k_1=1$. By the weak convergence of $\varphi_k(\cdot)$, we may find
        $k_1<k_2<\cdots <k_N$ such that
        $$   
            \abs{\int_{a}^{b}\langle\varphi_{k_i}(s), \varphi_{k_j}(s)\rangle ds} < %
            \frac{1}{N}\,\, 1\leq i<j\leq N
        $$
        observe
        \begin{align*}
            \norm{\frac{1}{N}\sum_{i=1}^{N}\varphi_{k_i}(\cdot)}^2_{L^2(a,b;\mathbb{R}^2)}%
            &= \frac{1}{N^2}\int_{a}^{b}\abs{\sum_{i=1}^{N}\varphi_{k_i}(s)}^2 ds \\
            &= \frac{1}{N^2} \int \sum_{i,j=1}^{N} \langle\varphi_{k_i}(s), %
                \varphi_{k_j}(s)\rangle ds \\
            &= \frac{1}{N^2}\sum_{i=1}^{N}\norm{\varphi_{k_i}(\cdot)}^2_{L^2(a,b;\mathbb{R}^n)}%
                +\frac{2}{N^2}\sum_{1\leq i<j \leq N}\int_{a}^{b} \langle\varphi_{k_i}(s), %
                \varphi_{k_j}(s)\rangle ds \\
            &\leq \frac{1}{N}\sup_{i\geq 1} \norm{\varphi_{k_i}(\cdot)}^2_{L^2(a,b;\mathbb{R}^n)} %
                +\frac{2}{N^3}\frac{N(N-1)}{2} \\
            &\leq \frac{1}{N}\sup_{i\geq 1}\norm{\varphi_{k_i}(\cdot)}^2_{L^2(a,b;\mathbb{R}^n)} %
                +\frac{1}{N}\to 0,
    	\end{align*}
    	when $N\to 0$. Now, consider that $\bar{\varphi}(\cdot)\neq 0$, thus
    	$\varphi_{k}(\cdot)-\bar{\varphi}(\cdot)=0$, and we can apply the previous steps.
    \end{proof}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{lemma}[{\cite[Lem.1.4.4, p. 26]{YongDG_ACIntro}}, Filippov]\label{FL}
        Let $U$ be a complete separable metric space whose metric is denoted by 
        $d(\cdot,\cdot)$. Let $g:[0,T]\times U\to \mathbb{R}^n$ be a map which is 
        measurable in $t\in[0,T]$ and
    	\begin{equation*}
    	    \abs{g(t,u)-g(t,v)} \leq \omega(d(u,v)), \,\, \forall u,v\in U, \, t\in [0,t],
    	\end{equation*}
        for some continuous and increasing function $\omega:\mathbb{R}_{+}\to \mathbb{R}_{+}$ 
        with $\omega(0)=0$, called a modulus of continuity. Moreover, $0\in g(t,U)$ a.e. 
        $t\in [0,t]$.
    	Then there exists a measurable map $u:[0,T] \to U$, such that 
    	\begin{equation}\label{eq1.17}
    	    g(t,u(t)) = 0 \,\, \mbox{ a.e. } \,\, t\in [0,T].
    	\end{equation}
    \end{lemma}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{proof}
        Define $\bar{d}(u,v)=\frac{d(u,v)}{1+d(u,v)}$ for every $u,v\in U$, and note that
        $\Bar{d}(u,v) < 1$. Then $(U, \Bar{d})$ is still complete and separable. Hence,
        without loss of generality, we assume that the original metric $d(\cdot,\cdot)$ 
        already satisfies $d(u,v)<1$ for every $u,v \in U$. Next, define
        \begin{equation*}
            \Gamma(t):=\{u\in U | g(t,u)=0\},\, t\in [0,t].
        \end{equation*}	
        We have that $\Gamma(t) \neq \varnothing$, because $0\in g(t,U) \,\,\, a.e. %
        \,\, t\in [0,t]$. Let $U_0:=\{v_k \, : \, k\geq 1\}$ be a countable dense subset
        of $U$. We claim that for any $u \in U$ and $0\leq c < 1$,
        \begin{equation}\label{eq1.18}
            \{t\in[0,T] \, : \, d(u,\Gamma(t)) \leq c\} =
            \bigcap^{\infty}_{i=1}\bigcup^{\infty}_{j=1}\{t\in[0,T] :\, d(u,v_j)\leq c %
            +\frac{1}{i},\abs{g(t,v_j)} \leq \frac{1}{i}\},
        \end{equation}
        where 
        $$d(u,\Gamma (t)):=\inf_{v\in \Gamma(t)}d(u,v).$$
        
        To show \cref{eq1.18}, we note that $t\in [0,T]$, with $d(u,\Gamma(t))\leq c$ 
        if and only if there exists a sequence $u_k \in \Gamma(t)$, i.e., $g(t,u_k)=0$, 
        such that
        $$
            d(u,u_k)\leq c+\frac{1}{k}.
        $$
        Since $\bar{U}_0=U$, there exists a sequence $v_{j_k} \in U_0$ such that 
        $$
            d(u_k,v_{j_k})<\frac{1}{k}.
        $$
        Hence, by triangle inequality
        $$
            d(u,v_{j_k}) \leq d(u,u_k)+d(u_k,v_{j_k}) \leq c + \frac{2}{k}.
        $$
        Next, by the uniform continuity of $u\mapsto g(t,u)$, we have
        $$
            \abs{g(t,v_{j_k})} \leq \abs{g(t,v_{j_k})-g(t,u_k)} \leq \omega(d(v_{j_k},u_k)) %
            \leq \omega \left(\frac{1}{k}\right).
        $$
        Hence, one has
        $$
        \left\{ 
        \begin{array}{l}
        	\lim_{k\to \infty} d(u,v_{j_k})\leq c, \\
            \lim_{k\to \infty} g(t,v_{j_k})=0. \\
        \end{array}
        \right.
        $$
        Thus, $d(u,\Gamma(t))\leq c$ if and only if for any $i\geq 1$, there exists a 
        $j\geq i$, such that
        $$
        \left\{ 
        \begin{array}{l}
            \bar{d}(u,v_{j})\leq c + \frac{1}{i}, \\
            \abs{g(t,v_{j})} \leq \frac{1}{i}. \\
        \end{array}
        \right.
        $$
        This prove \cref{eq1.18}. Since the right-hand side of \cref{eq1.18} is 
        measurable, so is the let-hand side. On the other hand,
        $$
            \left\{ \begin{array}{l}
            \{t\in[0,T] \, : \, d(u,\Gamma(t))\leq c\}=[0,T], \, %
                \mbox{ for every }\, c\geq 1, \\
            \{t\in[0,T] \, : \, d(u,\Gamma(t))\leq c\}=\varnothing, \, %
                \mbox{ for every }\, c<0. \\
            \end{array}
            \right.
        $$
        Hence, the function $t \mapsto d(u,\Gamma(t))$ is measurable. Now, we define
        $$
            u_0(t):=v_1,\,\mbox{ for every }\, t\in [0,T].
        $$
        Clearly, $u_0(t)$ is measurable and 
        $$
            d(u_0(t),\Gamma(t))<1\,\mbox{ for every }\,t\in[0,T].
        $$
        Suppose that we have defined $u_{k-1}(\cdot)$ such that 
        \begin{equation}\label{eq1.19}
            \left\{ 
                \begin{array}{l}
                    d(u_{k-1}(t),\Gamma(t))\leq 2^{1-k},  \\
                    d(u_{k-1}(t),u_{k-2}(t))\leq 2^{2-k},\\
                \end{array}
            \right. t\in[0,T].
        \end{equation}
        We define the sets
        $$
        \left\{ 
            \begin{array}{l}
        	    C^k_i:=\{t\in[0,T] \, : \, d(v_i,\Gamma(t))<2^{-k}\}, \\
        	    D^k_i:=\{t\in[0,T] \, : \, d(v_i,u_{k-1}(t))< 2^{1-k}\}.\\
            \end{array}
        \right.
        $$
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
        Since $t \mapsto d(v_i,\Gamma(t))$ is measurable, $C^k_i$ is measurable. 
        Likewise, $D^k_i$ is also measurable. Set
        $$
            A^k_i = C^k_i \cap D^k_i, \, \, k,i \geq 1.
        $$
        Then $A^k_i$ is measurable as well. We claim that
        \begin{equation}\label{eq1.20}
            [0,T]=\bigcup^{\infty}_{i=1} A^k_i \, \mbox{ for every } \, k\geq 1.
        \end{equation}
        In fact, for any $t\in[0,T]$, by \cref{eq1.19}, there exists a $u\in\Gamma(t)$ 
        such that 
        $$
            d(u_{k-1}(t),u)<2^{1-k}.
        $$
        By the density of $U_0$ in $U$, there exists an $i\geq 1$ such that
        $$
            d(v_i,\Gamma(t))\leq
            \left\{ \begin{array}{l}
        	    d(v_i,u)< 2^{-k},  \\
        	    d(v_i,u_{k-1}(t))<2^{1-k},\\
            \end{array}
            \right.
        $$
        which means $t\in A^k_i$, proving \cref{eq1.20}. Now we define
        $u_k(\cdot):[0,T]\to U_0\subseteq U$ as follows:
        $$
            u_k(t)=v_i,\,\mbox{ for every }\, t\in A^k_{i} \setminus %
            \bigcup^{\infty}_{j=1}A^k_j.
        $$
        By $t\in C^k_i$, we have 
        $$
            d(u_k(t),\Gamma(t))<2^{-k},
        $$
        and by $t\in D^k_i$, we have
        $$
            d(u_k(t),u_{k-1}(t))<2^{1-k}.
        $$
        This completes the construction of the sequence $\{u_k(\cdot)\}$ inductively.
        Clearly, \cref{eq1.19} holds for every $k\geq 1$. This, also implies that 
        for each $t\in[0,T]$, $\{u_k(t)\}$ is Cauchy in $U$. By completeness of $U$
        we obtain 
        $$
            \lim_{k\to \infty} u_k(t)=u(t),\, t\in [0,t].
        $$
        Of course, $u(\cdot)$ is measurable, and moreover, by the closeness of 
        $\Gamma(t)$, we have
        $$
            u(t)\in \Gamma(t),\,\mbox{ for every }\, t\in [0,T].
        $$
        This means \cref{eq1.17} holds.
    \end{proof}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{proposition}[{\cite[prop.1.4.7, p. 32]{YongDG_ACIntro}}, Gronwall's %
                        Inequality]\label{prop:GI}
        Let $\theta:[a,b]\to \mathbb{R}_{+}$ be continuous and satisfy
    	$$
    	    \theta (s)\leq \alpha(s)+\int_a^s\beta(r)\theta (r) dr,\,\, s \in [a,b],
    	$$
    	for some $\alpha(\cdot),\beta (\cdot)\in L^1(a,b;\mathbb{R}_{+})$. Then
    	\begin{equation}\label{eq1.30}
    	    \theta(s)\leq \alpha(s)+\int_{a}^{s}\alpha(\tau)\beta(\tau)e^{\int_{\tau}^{s}%
    	        \beta(r)dr}d\tau,\,\, s\in[a,b].
    	\end{equation}
    	In particular, if $\alpha(\cdot)=\alpha$ is a constant, then
    	\begin{equation}\label{eq1.31}
    	    \theta(s) \leq \alpha e^{\int_{a}^{s}\beta(r)dr}, \,\, s \in [a,b]. 
    	\end{equation}
    \end{proposition}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------
    \begin{proof}
        Let $\varphi(s)=\int_{a}^{s}\beta(r)\theta(r)dr.$, by the fundamental theorem 
        of calculus, we have
        $$
            \dot{\varphi}(s)=\beta(s)\theta(s)\leq \beta(s)[\alpha(s)+\varphi(s)].
        $$
        This leads to 
        $$
            [\varphi(s)e^{-\int_{a}^{s}\beta(r)dr}]'\leq\alpha(s)\beta(s) %
            e^{-\int_{a}^{s}\beta(r)dr}.
        $$
        Consequently,
        $$
            \varphi(s)e^{-\int_{a}^{s}\beta(r)dr}\leq\int_{a}^{s}\alpha(\tau)%
            \beta(\tau) e^{-\int_{a}^{\tau}\beta(r)dr}d\tau,
        $$
        then
        $$
            \varphi(s)\leq \int_{a}^{s}\alpha(\tau)\beta(\tau)%
            e^{-\int_{a}^{\tau}\beta(r)dr}e^{\int_{a}^{s}\beta(r)dr}d\tau,
        $$
        rewriting 
        $$
            \varphi(s)\leq \int_{a}^{s}\alpha(\tau)\beta(\tau)%
            e^{\int_{\tau}^{s}\beta(r)dr}d\tau .
        $$
        Hence,
        $$
            \theta(s)\leq \alpha(s)+\int_{a}^{s}\alpha(\tau)\beta(\tau)%
            e^{\int_{\tau}^{s}\beta(r)dr}d\tau.
        $$
        and \cref{eq1.30} holds. Now, consider $\alpha$ constant, then
        $$
            \theta(s)\leq \alpha+\int_{a}^{s}\alpha\beta(\tau)%
            e^{\int_{\tau}^{s}\beta(r)dr}d\tau.
        $$
        By integration rules, if $u=\alpha,dv=\beta(\tau)%
        e^{\int_{\tau}^{s}\beta(r)dr}d\tau$. In the other hand,
        $$
            \frac{d}{d\tau}e^{\int_{\tau}^{s}\beta(r)dr} = %
            \frac{d}{d\tau}e^{-\int_{s}^{\tau}\beta(r)dr} = -\beta(\tau) %
            e^{-\int_{s}^{\tau} \beta(r)dr} = -\beta(\tau)e^{\int_{\tau}^{s}\beta(r)dr}
        $$
        Then
        $$
            \theta(s)\leq\alpha-\alpha\int_{a}^{s}\frac{d}{d\tau}%
            e^{\int_{\tau}^{s}\beta(r)dr}d\tau = \alpha-\alpha [e^{0} -
            e^{\int_{a}^{s}\beta(r)dr}].
        $$
        Therefore,
        $$
            \theta(s)\leq \alpha e^{\int_{a}^{s}\beta(r)dr},
        $$
        and \cref{eq1.31} holds.
    \end{proof}
%----------%----------%----------%----------%----------%----------%----------%----------
%----------%----------%----------%----------%----------%----------%----------%----------